<!-- src/app/shared/components/sidebar/sidebar.component.html -->
<div class="claude-sidebar-container">
  <!-- Mobile backdrop when sidebar is expanded -->
  @if (isDrawerOpen()) {
    <div class="sidebar-backdrop md:hidden" (click)="toggleDrawer()"></div>
  }

  <!-- Sidebar Component - Exact Claude match -->
  <aside class="claude-sidebar" [class.collapsed]="!isDrawerOpen()">
    <!-- Sidebar Logo with C and toggle button -->
    <div class="sidebar-header">
      @if (isDrawerOpen()) {
        <div class="sidebar-logo">
          <span class="logo-text">Cir<span class="text-white">cular</span></span>
        </div>
      } @else {
        <div class="sidebar-logo">
          <span class="logo-text claude-c">C</span>
        </div>
      }
      @if (!isDrawerOpen()) {
        <button class="toggle-button-collapsed" (click)="toggleDrawer()" aria-label="Toggle sidebar">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      }
    </div>

    <!-- User Profile Section - exact match to Claude's UI -->
    <div class="user-profile">
      <div class="avatar">
        <span class="avatar-initials">{{getInitials()}}</span>
      </div>
      @if (isDrawerOpen()) {
        <div class="user-info">
          <span class="username">{{username}}</span>
          <span class="user-role">{{userRole}}</span>
        </div>
      }
    </div>

    <!-- Navigation Menu - Claude style collapsed version -->
    <nav class="sidebar-nav">
      @for (category of categories; track category.name) {
        <div class="nav-category">
          @if (isDrawerOpen()) {
            <h3 class="category-title">{{category.name}}</h3>
          } @else {
            <div class="category-divider"></div>
          }

          <ul class="nav-links">
            @for (link of category.links; track link.route) {
              <li class="nav-item">
                <a [routerLink]="link.route"
                   routerLinkActive="active"
                   [routerLinkActiveOptions]="{exact: true}"
                   [class.collapsed-link]="!isDrawerOpen()"
                   [title]="!isDrawerOpen() ? link.label : ''">

                  @if (!isDrawerOpen() && link.badge) {
                    <!-- Badge only version for collapsed view -->
                    <span class="nav-badge-collapsed" [ngClass]="link.badge.type">
                      {{link.badge.text}}
                    </span>
                  } @else {
                    <!-- Regular icon for items without badges when collapsed -->
                    <span class="nav-icon">
                      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" [attr.d]="getIconPath(link.icon)" />
                      </svg>
                    </span>

                    @if (isDrawerOpen()) {
                      <span class="nav-label">{{link.label}}</span>

                      @if (link.badge) {
                        <span class="nav-badge" [ngClass]="link.badge.type">
                          {{link.badge.text}}
                        </span>
                      }
                    }
                  }
                </a>
              </li>
            }
          </ul>
        </div>
      }
    </nav>

    <!-- Help Circle - bottom icon exactly like Claude -->
    <div class="sidebar-footer">
      <a routerLink="/help" class="help-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
        </svg>
      </a>
    </div>
  </aside>

  <!-- Main Content Adjustment -->
  <div class="content-wrapper" [class.sidebar-collapsed]="!isDrawerOpen()">
    <!-- Main content rendered here through router-outlet -->
  </div>
</div>
